# AI-Trader Aè‚¡å¸‚åœºé€‚é…å®æ–½æŒ‡å—

## ğŸ“‹ å®æ–½è¿›åº¦æ€»è§ˆ

### âœ… å·²å®Œæˆéƒ¨åˆ†

#### é˜¶æ®µä¸€ï¼šåŸºç¡€é€‚é…å±‚ï¼ˆ100%å®Œæˆï¼‰

1. **é…ç½®æ–‡ä»¶æ›´æ–°**
   - âœ… `requirements.txt` - æ·»åŠ Aè‚¡ä¾èµ–åŒ…ï¼ˆtushareã€akshareã€pandasç­‰ï¼‰
   - âœ… `.env.example` - æ·»åŠ TUSHARE_TOKENç­‰ç¯å¢ƒå˜é‡
   - âœ… `configs/default_config.json` - æ·»åŠ marketã€trading_rulesç­‰é…ç½®

2. **æ•°æ®å±‚**
   - âœ… `data/astock_list.json` - è‚¡ç¥¨æ± é…ç½®ï¼ˆæ²ªæ·±300/ä¸­è¯500/ç§‘åˆ›50/è‡ªå®šä¹‰ï¼‰
   - âœ… `data/get_astock_data.py` - Tushare Proæ•°æ®æ¥å…¥å®ç°
   - âœ… æ”¯æŒå¢é‡æ›´æ–°ã€åœç‰Œæ£€æµ‹ã€å‰å¤æƒè®¡ç®—

3. **äº¤æ˜“è§„åˆ™å±‚**
   - âœ… `tools/astock_rules.py` - Aè‚¡äº¤æ˜“è§„åˆ™æ ¡éªŒå™¨
   - âœ… `agent_tools/tool_trade.py` - é›†æˆT+1ã€æ¶¨è·Œåœã€æœ€å°äº¤æ˜“å•ä½æ ¡éªŒ
   - âœ… æ”¯æŒä¸»æ¿/ç§‘åˆ›æ¿/åˆ›ä¸šæ¿å·®å¼‚åŒ–è§„åˆ™

### ğŸš§ å¾…å®æ–½éƒ¨åˆ†

#### é˜¶æ®µäºŒï¼šå…±è¯†ç³»ç»Ÿï¼ˆ0%å®Œæˆï¼‰

éœ€è¦å®ç°çš„æ ¸å¿ƒæ–‡ä»¶ï¼š
- `data/get_consensus_data.py` - åŒ—å‘èµ„é‡‘ã€èèµ„èåˆ¸æ•°æ®è·å–
- `data/industry_mapping.json` - è¡Œä¸šåˆ†ç±»é…ç½®
- `agent_tools/tool_get_consensus.py` - å…±è¯†æ•°æ®æŸ¥è¯¢å·¥å…·
- `agent_tools/tool_consensus_filter.py` - å¤šç»´å…±è¯†ç­›é€‰ç®—æ³•
- `prompts/agent_prompt.py` - æ·»åŠ å…±è¯†ç­–ç•¥æŒ‡å¼•

#### é˜¶æ®µä¸‰ï¼šå›æµ‹å¼•æ“ï¼ˆ0%å®Œæˆï¼‰

éœ€è¦å®ç°çš„æ ¸å¿ƒæ–‡ä»¶ï¼š
- `configs/backtest_config.json` - å›æµ‹é…ç½®
- `tools/backtest_engine.py` - å›æµ‹å¼•æ“æ ¸å¿ƒç±»
- `agent/base_agent/backtest_agent.py` - å›æµ‹Agent
- ç»©æ•ˆåˆ†æå’ŒæŠ¥å‘Šç”Ÿæˆæ¨¡å—

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å†™ï¼š

```bash
# å¿…éœ€é…ç½®
TUSHARE_TOKEN=your_tushare_token_here

# å¯é€‰é…ç½®
MARKET=a_stock
TIMEZONE=Asia/Shanghai
```

è·å–Tushare Tokenï¼šhttps://tushare.pro/register

### 3. è·å–Aè‚¡å†å²æ•°æ®

ä½¿ç”¨è‡ªå®šä¹‰è‚¡ç¥¨æ± ï¼ˆæ¨èæµ‹è¯•ï¼‰ï¼š

```bash
cd data
python get_astock_data.py --pool custom --start 2024-01-01 --end 2024-12-31
```

ä½¿ç”¨æ²ªæ·±300æŒ‡æ•°ï¼š

```bash
python get_astock_data.py --pool hs300 --start 2024-01-01 --end 2024-12-31
```

å‚æ•°è¯´æ˜ï¼š
- `--pool`: è‚¡ç¥¨æ± é€‰æ‹©ï¼ˆhs300/zz500/kc50/customï¼‰
- `--start`: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- `--end`: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- `--incremental`: å¢é‡æ›´æ–°æ¨¡å¼

### 4. é…ç½®äº¤æ˜“ç³»ç»Ÿ

ä¿®æ”¹ `configs/default_config.json`ï¼š

```json
{
  "market": "a_stock",
  "stock_pool": "custom",
  "custom_stocks": [
    "600519.SH",
    "000858.SZ",
    "601318.SH"
  ],
  "agent_config": {
    "initial_cash": 100000.0
  }
}
```

### 5. è¿è¡Œäº¤æ˜“Agent

```bash
python main.py
```

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### æ•°æ®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | æ ¼å¼ |
|------|------|------|
| `data/merged.jsonl` | ä¸»è¡Œæƒ…æ•°æ®ï¼ˆOHLCVï¼‰ | æ¯è¡Œä¸€ä¸ªè‚¡ç¥¨JSON |
| `data/astock_list.json` | è‚¡ç¥¨æ± é…ç½® | ç»“æ„åŒ–é…ç½®æ–‡ä»¶ |
| `data/consensus_data.jsonl` | å…±è¯†æ•°æ®ï¼ˆå¾…å®ç°ï¼‰ | æ¯è¡Œä¸€æ¡è®°å½• |

### å·¥å…·æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `tools/astock_rules.py` | Aè‚¡äº¤æ˜“è§„åˆ™æ ¡éªŒ |
| `data/get_astock_data.py` | æ•°æ®è·å–è„šæœ¬ |
| `agent_tools/tool_trade.py` | äº¤æ˜“å·¥å…·ï¼ˆå·²é€‚é…Aè‚¡ï¼‰ |

---

## âš™ï¸ Aè‚¡ç‰¹æ®Šè§„åˆ™

### 1. T+1äº¤æ˜“åˆ¶åº¦

- **è§„åˆ™**ï¼šå½“æ—¥ä¹°å…¥çš„è‚¡ç¥¨ï¼Œæ¬¡æ—¥æ‰èƒ½å–å‡º
- **å®ç°**ï¼š`tools/astock_rules.py` ä¸­çš„ `check_t_plus_1()`
- **é”™è¯¯ç¤ºä¾‹**ï¼š
  ```
  2024-01-15 ä¹°å…¥ 600519.SH 100è‚¡
  2024-01-15 å–å‡º 600519.SH 100è‚¡ âŒ é”™è¯¯ï¼šT+1è§„åˆ™é™åˆ¶
  2024-01-16 å–å‡º 600519.SH 100è‚¡ âœ… æ­£ç¡®
  ```

### 2. æ¶¨è·Œåœé™åˆ¶

| æ¿å— | æ¶¨è·Œå¹…é™åˆ¶ | ä»£ç å‰ç¼€ |
|------|-----------|---------|
| ä¸»æ¿ | Â±10% | 600/601/603/000/001 |
| ç§‘åˆ›æ¿ | Â±20% | 688 |
| åˆ›ä¸šæ¿ | Â±20% | 300 |
| STè‚¡ç¥¨ | Â±5% | ST/\*STå¼€å¤´ |

**æ¶¨åœæ—¶ç¦æ­¢ä¹°å…¥ï¼Œè·Œåœæ—¶ç¦æ­¢å–å‡º**

### 3. æœ€å°äº¤æ˜“å•ä½

- ä¹°å…¥ï¼šå¿…é¡»æ˜¯100è‚¡çš„æ•´æ•°å€ï¼ˆ1æ‰‹=100è‚¡ï¼‰
- å–å‡ºï¼šå…è®¸é›¶è‚¡

---

## ğŸ”§ é…ç½®è¯´æ˜

### trading_rules é…ç½®

```json
{
  "trading_rules": {
    "t_plus": 1,
    "price_limit": {
      "main_board": 0.1,
      "star_market": 0.2,
      "gem_board": 0.2,
      "st_stock": 0.05
    },
    "min_unit": 100
  }
}
```

### è‚¡ç¥¨æ± é…ç½®

ç¼–è¾‘ `data/astock_list.json`ï¼š

```json
{
  "stock_pools": {
    "custom": {
      "symbols": [
        "600519.SH",  // è´µå·èŒ…å°
        "000858.SZ",  // äº”ç²®æ¶²
        "601318.SH"   // ä¸­å›½å¹³å®‰
      ]
    }
  }
}
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### å•å…ƒæµ‹è¯•ï¼ˆå¾…å®ç°ï¼‰

```bash
# æµ‹è¯•æ•°æ®è·å–
python -m pytest tests/test_data_fetch.py

# æµ‹è¯•äº¤æ˜“è§„åˆ™
python -m pytest tests/test_trading_rules.py
```

### é›†æˆæµ‹è¯•

è¿è¡Œå•æ—¥æ¨¡æ‹Ÿäº¤æ˜“éªŒè¯ï¼š

```bash
python main.py --date 2024-01-15
```

æ£€æŸ¥æ—¥å¿—ç¡®è®¤ï¼š
- âœ… æ•°æ®æˆåŠŸåŠ è½½
- âœ… T+1è§„åˆ™ç”Ÿæ•ˆ
- âœ… æ¶¨è·Œåœæ£€æµ‹æ­£å¸¸
- âœ… æœ€å°äº¤æ˜“å•ä½æ ¡éªŒé€šè¿‡

---

## â— å¸¸è§é—®é¢˜

### Q1: Tushare APIé™æµæ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ç§¯åˆ†æƒé™ï¼ˆæ³¨å†Œåæ¯æ—¥ç­¾åˆ°è·å–ç§¯åˆ†ï¼‰
2. æ·»åŠ é‡è¯•æœºåˆ¶ï¼ˆåœ¨ `get_astock_data.py` ä¸­å®ç°ï¼‰
3. å¤‡ç”¨æ•°æ®æºï¼šé…ç½® `AKSHARE_ENABLED=true`

### Q2: åœç‰Œè‚¡ç¥¨å¦‚ä½•å¤„ç†ï¼Ÿ

**å¤„ç†é€»è¾‘**ï¼š
- åœç‰Œæ£€æµ‹ï¼šé€šè¿‡æŸ¥è¯¢å½“æ—¥æ˜¯å¦æœ‰æ•°æ®åˆ¤æ–­
- è‡ªåŠ¨è·³è¿‡ï¼šäº¤æ˜“å‰æ ¡éªŒï¼Œåœç‰Œæ—¶è¿”å›é”™è¯¯

### Q3: å¦‚ä½•å¤„ç†STè‚¡ç¥¨ï¼Ÿ

**æ¨èé…ç½®**ï¼š
```python
# åœ¨ get_astock_data.py ä¸­è¿‡æ»¤
def filter_st_stocks(symbols):
    # æŸ¥è¯¢è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼Œæ’é™¤STè‚¡ç¥¨
    return [s for s in symbols if not is_st_stock(s)]
```

### Q4: æ•°æ®ä¸å®Œæ•´æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. éªŒè¯ Tushare Token æœ‰æ•ˆæ€§
2. æ£€æŸ¥æ—¥æœŸèŒƒå›´æ˜¯å¦åŒ…å«äº¤æ˜“æ—¥
3. æŸ¥çœ‹åœç‰Œè®°å½•ï¼šæŸäº›è‚¡ç¥¨é•¿æœŸåœç‰Œ

---

## ğŸ“Š ä¸‹ä¸€æ­¥è®¡åˆ’

### è¿‘æœŸï¼ˆ1-2å‘¨ï¼‰

1. âœ… å®Œæˆé˜¶æ®µä¸€åŸºç¡€é€‚é…
2. â³ å®ç°å…±è¯†æ•°æ®è·å–ï¼ˆåŒ—å‘èµ„é‡‘ã€èèµ„èåˆ¸ï¼‰
3. â³ å¼€å‘å…±è¯†ç­›é€‰å·¥å…·
4. â³ æ›´æ–°Promptæ·»åŠ Aè‚¡ç­–ç•¥æŒ‡å¼•

### ä¸­æœŸï¼ˆ3-4å‘¨ï¼‰

1. â³ å¼€å‘å›æµ‹å¼•æ“
2. â³ å®ç°ç»©æ•ˆåˆ†æ
3. â³ å®Œæˆ2024å¹´å…¨å¹´å›æµ‹
4. â³ å¯¹æ¯”NASDAQç­–ç•¥è¡¨ç°

### é•¿æœŸä¼˜åŒ–

1. â³ é›†æˆæ›´å¤šæ•°æ®æºï¼ˆä¸œæ–¹è´¢å¯Œã€åŒèŠ±é¡ºï¼‰
2. â³ å®ç°å®æ—¶äº¤æ˜“æ¥å£ï¼ˆåˆ¸å•†APIï¼‰
3. â³ å¢åŠ é£æ§æ¨¡å—ï¼ˆæ­¢æŸã€ä»“ä½ç®¡ç†ï¼‰
4. â³ æ”¯æŒæœŸè´§/æœŸæƒäº¤æ˜“

---

## ğŸ“ æ”¯æŒä¸è´¡çŒ®

- **æ–‡æ¡£**: `/docs` ç›®å½•
- **ç¤ºä¾‹**: `/examples` ç›®å½•ï¼ˆå¾…åˆ›å»ºï¼‰
- **é—®é¢˜åé¦ˆ**: GitHub Issues

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0-alpha (2025-11-03)

- âœ… å®Œæˆé˜¶æ®µä¸€åŸºç¡€é€‚é…
- âœ… å®ç°Aè‚¡æ•°æ®è·å–
- âœ… é›†æˆäº¤æ˜“è§„åˆ™æ ¡éªŒ
- âœ… æ›´æ–°é…ç½®æ–‡ä»¶å’Œä¾èµ–

---

**æ³¨æ„**ï¼šå½“å‰ç‰ˆæœ¬ä¸ºAlphaæµ‹è¯•ç‰ˆï¼Œä»…æ”¯æŒå†å²æ•°æ®å›æµ‹ï¼Œä¸å»ºè®®ç”¨äºå®ç›˜äº¤æ˜“ã€‚
